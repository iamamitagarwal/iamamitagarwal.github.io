{% comment %} expects "pub" variable {% endcomment %}
{% assign p = include.pub %}
{% assign url = p.paper_url | default: p.pdf_url | default: "" %}
{% assign host = url | replace: 'https://','' | replace:'http://','' | split:'/' | first | downcase %}
{% assign path = url | split:'/' | last | downcase %}

{% assign badge = '' %}
{% assign vb = 'vb-generic' %}

{% if p.venue_slug %}
  {% assign slug = p.venue_slug | downcase %}
  {% assign badge = slug %}
  {% case slug %}
    {% when 'emnlp' %}{% assign vb='vb-emnlp' %}
    {% when 'acl' %}{% assign vb='vb-acl' %}
    {% when 'naacl' %}{% assign vb='vb-naacl' %}
    {% when 'eacl' %}{% assign vb='vb-eacl' %}
    {% when 'coling' %}{% assign vb='vb-coling' %}
    {% when 'tacl' %}{% assign vb='vb-tacl' %}
    {% when 'cl' %}{% assign vb='vb-cl' %}
    {% when 'ieee' %}{% assign vb='vb-ieee' %}
    {% when 'acm' %}{% assign vb='vb-acm' %}
    {% when 'openreview' %}{% assign vb='vb-openreview' %}
    {% when 'springer' %}{% assign vb='vb-springer' %}
    {% when 'arxiv' %}{% assign vb='vb-arxiv' %}
    {% else %}{% assign vb='vb-generic' %}
  {% endcase %}
{% else %}
  {% if host contains 'aclanthology.org' %}
    {% if path contains 'emnlp' %}{% assign badge='emnlp' %}{% assign vb='vb-emnlp' %}
    {% elsif path contains 'naacl' %}{% assign badge='naacl' %}{% assign vb='vb-naacl' %}
    {% elsif path contains 'acl' %}{% assign badge='acl' %}{% assign vb='vb-acl' %}
    {% elsif path contains 'eacl' %}{% assign badge='eacl' %}{% assign vb='vb-eacl' %}
    {% elsif path contains 'coling' %}{% assign badge='coling' %}{% assign vb='vb-coling' %}
    {% elsif path contains 'tacl' %}{% assign badge='tacl' %}{% assign vb='vb-tacl' %}
    {% elsif path contains 'cl' %}{% assign badge='cl' %}{% assign vb='vb-cl' %}
    {% else %}{% assign badge='acl' %}{% assign vb='vb-acl' %}
    {% endif %}
  {% elsif host contains 'ieeexplore.ieee.org' %}
    {% assign badge='ieee' %}{% assign vb='vb-ieee' %}
  {% elsif host contains 'dl.acm.org' %}
    {% assign badge='acm' %}{% assign vb='vb-acm' %}
  {% elsif host contains 'arxiv.org' or host == 'arxiv' %}
    {% assign badge='arxiv' %}{% assign vb='vb-arxiv' %}
  {% elsif host contains 'openreview' %}
    {% assign badge='openreview' %}{% assign vb='vb-openreview' %}
  {% elsif host contains 'springer' %}
    {% assign badge='springer' %}{% assign vb='vb-springer' %}
  {% else %}
    {% if url contains 'emnlp' %}{% assign badge='emnlp' %}{% assign vb='vb-emnlp' %}
    {% elsif url contains 'naacl' %}{% assign badge='naacl' %}{% assign vb='vb-naacl' %}
    {% elsif url contains 'acl' %}{% assign badge='acl' %}{% assign vb='vb-acl' %}
    {% elsif url contains 'coling' %}{% assign badge='coling' %}{% assign vb='vb-coling' %}
    {% endif %}
  {% endif %}
{% endif %}

{% assign authors_html = p.authors | replace: 'Agarwal, Amit', '<strong class="me-emph">Agarwal, Amit</strong>' %}

<li class="pub-item" data-tags="{{ p.tags | join: ' ' }}">
  <strong>
    {% if url %}
      <a class="pub-title" href="{{ url }}">{{ p.title }}</a>
    {% else %}
      <a class="pub-title" href="{{ p.url | relative_url }}">{{ p.title }}</a>
    {% endif %}
  </strong>
  {% if badge != '' %}
    <span class="venue-badge {{ vb }}">{{ badge }}</span>
  {% endif %}
  <br/>
  <em>{{ authors_html }}</em>. {{ p.venue }}{% if p.year %} ({{ p.year }}){% endif %}.
  <div class="link-pills">
    {% if p.paper_url %}<a class="link-pill" href="{{ p.paper_url }}">ðŸ“„ Paper</a>{% endif %}
    {% if p.pdf_url %}<a class="link-pill pill--pdf" href="{{ p.pdf_url }}">PDF</a>{% endif %}
    {% if p.code_url %}<a class="link-pill pill--code" href="{{ p.code_url }}">Code</a>{% endif %}
    {% if p.url %}<a class="link-pill" href="{{ p.url | relative_url }}">Details</a>{% endif %}
    {% if p.bibtex %}<button class="link-pill" onclick="navigator.clipboard.writeText(this.dataset.bib);this.textContent='Copied!';setTimeout(()=>this.textContent='BibTeX',900)" data-bib="{{ p.bibtex | escape }}">BibTeX</button>{% endif %}
  </div>
</li>
