{% assign p = include.pub %}

<li class="pub-item" data-tags="{{ p.tags | join: ' ' }}">
  <strong>
    <a class="pub-title" href="{{ p.paper_url | default: p.pdf_url | default: p.url | relative_url }}">
      {{ p.title }}
    </a>
  </strong>

  {%- comment -%} Venue badge (safe even if fields are missing) {%- endcomment -%}
  {% assign lower_url = p.paper_url | default: "" | downcase %}
  {% assign lower_vnu = p.venue | default: "" | downcase %}
  {% assign badge = "" %}
  {% if lower_vnu contains "emnlp" or lower_url contains "emnlp" %}
    {% assign badge = "EMNLP" %}
  {% elsif lower_vnu contains "acl" or lower_url contains "acl" %}
    {% assign badge = "ACL" %}
  {% elsif lower_vnu contains "naacl" or lower_url contains "naacl" %}
    {% assign badge = "NAACL" %}
  {% elsif lower_vnu contains "neurips" or lower_url contains "neurips" %}
    {% assign badge = "NeurIPS" %}
  {% elsif lower_vnu contains "iclr" or lower_url contains "iclr" %}
    {% assign badge = "ICLR" %}
  {% elsif lower_vnu contains "icml" or lower_url contains "icml" %}
    {% assign badge = "ICML" %}
  {% elsif lower_vnu contains "cvpr" or lower_url contains "cvpr" %}
    {% assign badge = "CVPR" %}
  {% elsif lower_vnu contains "iccv" or lower_url contains "iccv" %}
    {% assign badge = "ICCV" %}
  {% elsif lower_vnu contains "eccv" or lower_url contains "eccv" %}
    {% assign badge = "ECCV" %}
  {% elsif lower_vnu contains "ieee" or lower_url contains "ieee" %}
    {% assign badge = "IEEE" %}
  {% elsif lower_vnu contains "acm" or lower_url contains "acm" %}
    {% assign badge = "ACM" %}
  {% elsif lower_vnu contains "arxiv" or lower_url contains "arxiv" %}
    {% assign badge = "arXiv" %}
  {% endif %}

  {% if badge != "" %}
    <span class="venue-badge badge-{{ badge | downcase }}">{{ badge }}</span>
  {% endif %}

  <br/>

  {%- comment -%} Authors, with Amit highlighted {%- endcomment -%}
  <em>
    {{ p.authors | replace: "Agarwal, Amit", "<strong>Agarwal, Amit</strong>" }}
  </em>.
  {% if p.venue %} {{ p.venue }}{% endif %}{% if p.year %} ({{ p.year }}){% endif %}.

  <div class="link-pills">
    {% if p.paper_url %}
      <a class="link-pill" href="{{ p.paper_url }}" target="_blank" rel="noopener">ðŸ“„ Paper</a>
    {% endif %}
    {% if p.pdf_url %}
      <a class="link-pill pill--pdf" href="{{ p.pdf_url }}" target="_blank" rel="noopener">PDF</a>
    {% endif %}
    {% if p.code_url %}
      <a class="link-pill pill--code" href="{{ p.code_url }}" target="_blank" rel="noopener">Code</a>
    {% endif %}
    <a class="link-pill" href="{{ p.url | relative_url }}">Details</a>
  </div>
</li>
